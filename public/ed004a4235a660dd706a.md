---
title: 'ã€ãƒãƒ³ã‚ºã‚ªãƒ³ã€‘NestJSã§æ§‹ç¯‰ã™ã‚‹CIç’°å¢ƒã€€NestJS meetup #2'
tags:
  - Docker
  - Jest
  - TypeORM
  - NestJS
  - GitHubActions
private: false
updated_at: '2022-06-17T11:13:24+09:00'
id: ed004a4235a660dd706a
organization_url_name: null
slide: false
ignorePublish: false
---
# æ¦‚è¦

ã“ã¡ã‚‰ã®è¨˜äº‹ã¯ã‚¤ãƒ™ãƒ³ãƒˆç™»å£‡æ™‚ã®ãƒ‡ãƒ¢ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒãƒ³ã‚ºã‚ªãƒ³ã§æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«æ•´ç†ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™

https://nest-jp.connpass.com/event/244015/

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

ä»»æ„ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¯`npm`ã‚’åˆ©ç”¨ã—ã¾ã™

https://docs.nestjs.com/first-steps

```bash
npm i -g @nestjs/cli

nest new meetup_demo

âš¡  We will scaffold your app in a few seconds..
? Which package manager would you â¤ï¸  to use? npm
âœ” Installation in progress... â˜•

ğŸš€  Successfully created project meetup_demo
ğŸ‘‰  Get started with the following commands:

$ cd meetup_demo
$ npm run start
```

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’èµ·å‹•ã—ã¾ã™

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èµ·å‹•ã«æˆåŠŸã—ãŸã‚‰ä»»æ„ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ã‚³ãƒŸãƒƒãƒˆã‚’è¡Œãªã£ã¦ãã ã•ã„

```bash
cd meetup_demo

# å·®åˆ†ã‚’è‡ªå‹•æ¤œçŸ¥ã™ã‚‹ watchãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¾ã™
npm run start:dev

[3:44:27 AM] Starting compilation in watch mode...

[3:44:31 AM] Found 0 errors. Watching for file changes.

[Nest] 6003  - 04/20/2022, 3:44:32 AM     LOG [NestFactory] Starting Nest application...
[Nest] 6003  - 04/20/2022, 3:44:32 AM     LOG [InstanceLoader] AppModule dependencies initialized +51ms
[Nest] 6003  - 04/20/2022, 3:44:32 AM     LOG [RoutesResolver] AppController {/}: +67ms
[Nest] 6003  - 04/20/2022, 3:44:32 AM     LOG [RouterExplorer] Mapped {/, GET} route +5ms
[Nest] 6003  - 04/20/2022, 3:44:32 AM     LOG [NestApplication] Nest application successfully started +4ms
```

# Dockerãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™

```Dockerfile:Dockerfile
# ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸
FROM node:14.16.1-alpine as build-develop

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
WORKDIR /work

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…ä¸‹ã‚’/worké…ä¸‹ã«é…ç½®
COPY . /work/

# ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’éè¡¨ç¤ºã«ã—ã¦é«˜é€ŸåŒ–
RUN npm install --no-progress

# eslintã‚’å®Ÿè¡Œ
RUN npm run lint

# å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
RUN npm run build

FROM node:14.16.1-alpine as build-stage

# localeã‚’æ—¥æœ¬èªã«
ENV LANG C.UTF-8

ENV TZ Asia/Tokyo

WORKDIR /app

COPY ./package.json ./package-lock.json ./

# --cache /tmp/empty-cache ä¸€æ™‚çš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’åˆ©ç”¨
RUN npm install --production --no-progress --cache /tmp/empty-cache && rm -rf /tmp/empty-cache
COPY --from=build-stage /work/dist ./dist

# https://github.com/krallin/tini
# PID 1å¯¾ç­–
RUN apk add --no-cache tini

ENTRYPOINT ["/sbin/tini", "--"]

USER node

# ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ä¸Šã«ãƒãƒ¼ãƒˆã‚’éœ²å‡ºï¼ˆexposeï¼‰ã—ã¾ã™ãŒã€å…¬é–‹ã¯ã—ã¾ã›ã‚“
EXPOSE 3000

ENV NODE_ENV prod

CMD ["node", "dist/src/main"]
```

```yml:docker-compose.yml
services:
  db:
    # ä½¿ç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸
    image: mysql:8.0
    # Dockerã®å…¬å¼MySQLã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’utf8mb4ã«ã™ã‚‹
    command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    container_name: meetup_db_container
    # ãƒ›ã‚¹ãƒˆï¼ˆmysql-data-volume)ã‚’ã‚³ãƒ³ãƒ†ãƒŠ(/var/lib/mysql)ã«ãƒã‚¦ãƒ³ãƒˆ
    volumes:
      - mysql-data-volume:/var/lib/mysql
    ports:
      - "3306:3306"
    environment:
      TZ: 'Asia/Tokyo'
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: meetup
      MYSQL_USER: app
      MYSQL_PASSWORD: secret

# ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šåŒ–
volumes:
  mysql-data-volume:
```

## ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™

MySQLã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ãŸã‚‰ä¸€æ—¦ã‚³ãƒŸãƒƒãƒˆã—ã¾ã—ã‚‡ã†

```bash
 docker-compose up -d                                                                                               î‚² âœ”  04:40:34 ï€— 
Creating meetup_db_container ... done

docker-compose ps                                                                                                  î‚² âœ”  04:40:37 ï€— 
       Name                      Command               State                 Ports              
------------------------------------------------------------------------------------------------
meetup_db_container   docker-entrypoint.sh mysql ...   Up      0.0.0.0:3306->3306/tcp, 33060/tcp
```

# ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã—ã¾ã™

https://docs.nestjs.com/techniques/configuration

## ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```bash
npm i --save @nestjs/config

mkdir src/config && vi src/config/configuration.ts
```

## ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™

```ts:src/config/configuration.ts
export default () => ({
  nodeEnv: process.env.NODE_ENV || 'development',
  server: {
    port: parseInt(process.env.PORT) || 3000,
    hostName: process.env.hostname || 'localhost:3000',
  },
  database: {
    host: process.env.DB_HOST || 'localhost',
    port: parseInt(process.env.DB_PORT) || 3306,
    user: process.env.DB_USERNAME || 'root',
    pass: process.env.DB_PASSWORD || 'password',
    name: process.env.DB_NAME || 'meetup',
  },
});
```



## TyprORMã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šç¾©ã—ã¦ã„ãã¾ã™

https://typeorm.io/

https://docs.nestjs.com/techniques/database

## ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```bash
npm install --save @nestjs/typeorm typeorm@0.2 mysql2
```

## TypeORMã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ¥ç¶šå†…å®¹ã‚’å®šç¾©ã—ã¾ã™

â€» ã“ã®æ‰‹é †ã‚’é£›ã°ã™ã¨æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚‰ãªã„ãŸã‚ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™

https://github.com/nestjs/nest/issues/4990

```bash
No connection options were found in any orm configuration files
```

## è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šç¾©ã—ã¾ã™

```bash
vi ormconfig.ts 
```

https://orkhan.gitbook.io/typeorm/docs/connection-options

```ts:ormconfig.ts
module.exports = {
  type: 'mysql',
  host: process.env.DB_HOST || 'localhost',
  port: process.env.DB_PORT || '3306',
  username: process.env.DB_USERNAME || 'root',
  password: process.env.DB_PASSWORD || 'password',
  database: process.env.DB_NAME || 'meetup',

  // Entityã®è‡ªå‹•åŒæœŸç„¡åŠ¹
  synchronize: false,

  // ã‚¯ã‚¨ãƒªãŠã‚ˆã³ã‚¨ãƒ©ãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹
  logging: true,
  entities: ['src/**/**/*.entity{.ts,.js}'],
  migrations: ['src/databases/migrations/*.ts'],
  seeds: ['src/databases/seeders/*.seed.{js,ts}'],
  factories: ['src/databases/factories/*.factory.{js,ts}'],
  cli: {
    migrationsDir: 'src/databases/migrations',
    entitiesDir: 'src/**/entities',
    seedersDir: 'src/databases/seeders',
    factoriesDir: 'src/databases/factories',
  },
};
```

## ãƒ«ãƒ¼ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã¾ã™

https://docs.nestjs.com/techniques/database

```ts:app.module.ts
import { Module } from '@nestjs/common';
import { AppController } from './app.controller';
import { AppService } from './app.service';
import { TypeOrmModule } from '@nestjs/typeorm';
import { join } from 'path';
import { ConfigModule, ConfigService } from '@nestjs/config';
import configuration from './config/configuration';

@Module({
  imports: [
    ConfigModule.forRoot({
      // ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ConfigModuleã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã›ãšã«åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«
      isGlobal: true,

      // ç’°å¢ƒå¤‰æ•°ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
      load: [configuration],
    }),

    TypeOrmModule.forRootAsync({
      imports: [ConfigModule],
      useFactory: (configService: ConfigService) => ({
        type: 'mysql',
        host: configService.get('database.host'),
        port: Number(configService.get('database.port')),
        username: configService.get('database.user'),
        password: configService.get('database.pass'),
        database: configService.get('database.name'),
        entities: [join(__dirname, '**/entities/*.entity.{ts,js}')],
        synchronize: false,
        logging: configService.get('nodeEnv') === 'development',
        extra: {},
      }),
      inject: [ConfigService],
    }),
  ],
  controllers: [AppController],
  providers: [AppService],
})
export class AppModule {}
```

## TypeORMã®è¨­å®šãŒå®Œäº†ã—ãŸã®ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’èµ·å‹•ã—ã¾ã™

TypeOrmModuleã®åˆæœŸåŒ–ãŒæˆåŠŸã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã‚Œã°OKã§ã™ã€‚
ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã¾ã—ã‚‡ã†

```bash
docker-compose up -d  
npm run start:dev

[Nest] 6243  - 04/22/2022, 4:14:07 AM     LOG [NestFactory] Starting Nest application...
[Nest] 6243  - 04/22/2022, 4:14:07 AM     LOG [InstanceLoader] TypeOrmModule dependencies initialized +38ms
```

# CRUDæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™

`CRUD generator`ã§é››å½¢ã‚’ä½œã‚Šã¾ã™

https://docs.nestjs.com/recipes/crud-generator

```bash
 nest g resource cats                                                                                           î‚² âœ”  19s ï‰’  00:11:53 ï€— 
? What transport layer do you use? REST API
? Would you like to generate CRUD entry points? Yes
CREATE src/cats/cats.controller.spec.ts (556 bytes)
CREATE src/cats/cats.controller.ts (873 bytes)
CREATE src/cats/cats.module.ts (240 bytes)
CREATE src/cats/cats.service.spec.ts (446 bytes)
CREATE src/cats/cats.service.ts (595 bytes)
CREATE src/cats/dto/create-cat.dto.ts (29 bytes)
CREATE src/cats/dto/update-cat.dto.ts (165 bytes)
CREATE src/cats/entities/cat.entity.ts (20 bytes)
UPDATE package.json (2148 bytes)
UPDATE src/app.module.ts (1404 bytes)
```

## `Entity`ã‚’å®šç¾©ã—ã¾ã™

- `Entity`ã¨ã¯
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹ã®ã“ã¨ã§ã™

https://orkhan.gitbook.io/typeorm/docs/entities#what-is-entity

https://zenn.dev/naonao70/articles/f0399d2baf05cc

```ts:src/cats/entities/cat.entity.ts
import {
  Column,
  CreateDateColumn,
  Entity,
  PrimaryGeneratedColumn,
  Timestamp,
  UpdateDateColumn,
} from 'typeorm';

@Entity('cats')
export class Cat {
  @PrimaryGeneratedColumn({
    name: 'id',
    unsigned: true,
    type: 'smallint',
    comment: 'ID',
  })
  readonly id: number;

  @Column('varchar', { comment: 'çŒ«ã®åå‰' })
  name: string;

  @CreateDateColumn({ comment: 'ç™»éŒ²æ—¥æ™‚' })
  readonly ins_ts?: Timestamp;

  @UpdateDateColumn({ comment: 'æœ€çµ‚æ›´æ–°æ—¥æ™‚' })
  readonly upd_ts?: Timestamp;

  constructor(name: string) {
    this.name = name;
  }
}
```

## ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ã§ç”Ÿæˆã—ã¾ã™

https://www.wakuwakubank.com/posts/725-typeorm-cli-init/

```bash
# npx package.jsonã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã›ãšä½¿ã†ã®ã§npxã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ 
# ts-node tsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ã®ã§ã€ts-node ã‚’åˆ©ç”¨ã—ã¾ã™
npx ts-node ./node_modules/.bin/typeorm migration:generate -n cats

# è‡ªå‹•ã§ä½œæˆã•ã‚Œã‚Œã°æˆåŠŸã§ã™
Migration /Users/habanaoki/Desktop/Practice/meetup_demo/src/databases/migrations/1650814095673-cats.ts has been generated successfully.
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™

```bash
# ç¾åœ¨ã®å‹æƒ…å ±ã‚’disté…ä¸‹ã«ãƒ“ãƒ«ãƒ‰ã—ã¾ã™
npm run build

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ã¾ã™
npx ts-node ./node_modules/.bin/typeorm migration:run

# æˆåŠŸã™ã‚Œã°OKã§ã™
Migration cats1650814095673 has been executed successfully.
query: COMMIT
```

### ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’MySQLã‚³ãƒ³ãƒ†ãƒŠå†…ã§ç¢ºèªã—ã¾ã™

```bash
# DBã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚Šã¾ã™
docker-compose exec db bash                                                                                     î‚² âœ”  00:38:50 ï€—
# ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ 
root@e6d879736822:/# mysql -u root -p
# password ã‚’å…¥åŠ›ã—ã¾ã™
Enter password:

# meetup ã‚’åˆ©ç”¨ã—ã¾ã™
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| meetup             |
| mysql              |
| performance_schema |
| sys                |
+--------------------+

mysql> use meetup;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed

# å…ˆã»ã©å®šç¾©ã—ãŸEntityã®ãƒ‡ãƒ¼ã‚¿å‹é€šã‚Šã«ä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸã‚‰OKã§ã™
mysql> DESC cats;
+--------+-------------------+------+-----+----------------------+--------------------------------------------------+
| Field  | Type              | Null | Key | Default              | Extra                                            |
+--------+-------------------+------+-----+----------------------+--------------------------------------------------+
| id     | smallint unsigned | NO   | PRI | NULL                 | auto_increment                                   |
| name   | varchar(255)      | NO   |     | NULL                 |                                                  |
| ins_ts | datetime(6)       | NO   |     | CURRENT_TIMESTAMP(6) | DEFAULT_GENERATED                                |
| upd_ts | datetime(6)       | NO   |     | CURRENT_TIMESTAMP(6) | DEFAULT_GENERATED on update CURRENT_TIMESTAMP(6) |
+--------+-------------------+------+-----+----------------------+--------------------------------------------------+
``` 

ã“ã“ã¾ã§ç¢ºèªã§ãã¾ã—ãŸã‚‰ã‚³ãƒŸãƒƒãƒˆã—ã¦ãŠãã¾ã—ã‚‡ã†

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ã¾ã™ 

```ts:src/cats/cats.module.ts
import { Module } from '@nestjs/common';
import { CatsService } from './cats.service';
import { CatsController } from './cats.controller';
import { TypeOrmModule } from '@nestjs/typeorm';
import { Cat } from './entities/cat.entity';

@Module({
  // ç‰¹å®šã®Entityã®ã¿importã—ã¾ã™
  imports: [TypeOrmModule.forFeature([Cat])],
  // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å¤–ã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™
  exports: [TypeOrmModule],
  controllers: [CatsController],
  providers: [CatsService],
})
export class CatsModule {}
```

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™

https://github.com/typestack/class-validator

### ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

```bash
npm install class-validator --save
```

```ts:src/cats/dto/create-cat.dto.ts
import { IsNotEmpty, MaxLength } from 'class-validator';

export class CreateCatDto {
  @IsNotEmpty({ message: 'åå‰ã¯å¿…é ˆé …ç›®ã§ã™' })
  @MaxLength(255, { message: 'åå‰ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„' })
  name: string;
}
```

```ts:src/cats/dto/update-cat.dto.ts
import { PartialType } from '@nestjs/mapped-types';
import { CreateCatDto } from './create-cat.dto';
import { IsNotEmpty, MaxLength } from 'class-validator';

export class UpdateCatDto extends PartialType(CreateCatDto) {
  @IsNotEmpty({ message: 'åå‰ã¯å¿…é ˆé …ç›®ã§ã™' })
  @MaxLength(255, { message: 'åå‰ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„' })
  name: string;
}
```

## ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨ã™ã‚‹å‡¦ç†ã‚’`main.ts`ã«è¿½åŠ ã—ã¾ã™

```ts:src/main.ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import { ValidationPipe } from '@nestjs/common';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  // ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚½ãƒ¼ã‚¹å…±æœ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹
  app.enableCors();

  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•ã§é©ç”¨
  app.useGlobalPipes(new ValidationPipe());
  await app.listen(3000);
}
bootstrap().catch((err) => {
  process.exit(1);
});
```


## ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™

æƒ³å®šã™ã‚‹æˆ»ã‚Šå€¤ã®å‹ã¨éåŒæœŸã§å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’å®šç¾©ã—ã¾ã™

ç¾æ™‚ç‚¹ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã®æˆ»ã‚Šå€¤ã¨ä¸€è‡´ã—ãªã„ã®ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™

```ts:src/cats/cats.controller.ts
import {
  Controller,
  Get,
  Post,
  Body,
  Patch,
  Param,
  Delete,
} from '@nestjs/common';
import { CatsService } from './cats.service';
import { CreateCatDto } from './dto/create-cat.dto';
import { UpdateCatDto } from './dto/update-cat.dto';
import { Cat } from './entities/cat.entity';
import { DeleteResult, UpdateResult } from 'typeorm';

@Controller('cats')
export class CatsController {
  constructor(private readonly catsService: CatsService) {}

  @Post()
  async create(@Body() createCatDto: CreateCatDto): Promise<Cat> {
    return await this.catsService.create(createCatDto);
  }

  @Get()
  async findAll(): Promise<Cat[]> {
    return await this.catsService.findAll();
  }

  @Get(':id')
  async findOne(@Param('id') id: string): Promise<Cat> {
    return await this.catsService.findOne(+id);
  }

  @Patch(':id')
  async update(
    @Param('id') id: string,
    @Body() updateCatDto: UpdateCatDto,
  ): Promise<UpdateResult> {
    return await this.catsService.update(+id, updateCatDto);
  }

  @Delete(':id')
  async remove(@Param('id') id: string): Promise<DeleteResult> {
    return await this.catsService.remove(+id);
  }
}
```

## ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ã¾ã™

```ts
import { Injectable, InternalServerErrorException } from '@nestjs/common';
import { CreateCatDto } from './dto/create-cat.dto';
import { UpdateCatDto } from './dto/update-cat.dto';
import { Cat } from './entities/cat.entity';
import { InjectRepository } from '@nestjs/typeorm';
import { DeleteResult, Repository, UpdateResult } from 'typeorm';

@Injectable()
export class CatsService {
  constructor(@InjectRepository(Cat) private catRepository: Repository<Cat>) {}

  /**
   * @summary ç™»éŒ²æ©Ÿèƒ½
   * @param createCatDto
   */
  async create(createCatDto: CreateCatDto): Promise<Cat> {
    return await this.catRepository
      .save({ name: createCatDto.name })
      .catch((e) => {
        throw new InternalServerErrorException(e.message);
      });
  }

  /**
   * @summary å…¨ä»¶å–å¾—
   */
  async findAll(): Promise<Cat[]> {
    return await this.catRepository.find().catch((e) => {
      throw new InternalServerErrorException(e.message);
    });
  }

  /**
   * @summary è©²å½“IDå–å¾—
   * @param id
   */
  async findOne(id: number): Promise<Cat> {
    const cat = await this.catRepository.findOne(id);

    if (!cat) {
      throw new NotFoundException(
        `${id}ã«ä¸€è‡´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚`,
      );
    }
    return cat;
  }

  /**
   * @summary è©²å½“IDæ›´æ–°
   * @param id
   */
  async update(id: number, updateCatDto: UpdateCatDto): Promise<UpdateResult> {
    {
      return await this.catRepository
        .update(id, { name: updateCatDto.name })
        .catch((e) => {
          throw new InternalServerErrorException(e.message);
        });
    }
  }

  /**
   * @summary å‰Šé™¤
   * @param id
   */
  async remove(id: number): Promise<DeleteResult> {
    return await this.catRepository.delete(id).catch((e) => {
      throw new InternalServerErrorException(e.message);
    });
  }
}
```

## APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã¦ã¿ã¾ã—ã‚‡ã†

```bash
# create
curl -X POST --location "http://localhost:3000/cats" \
    -H "Content-Type: application/json" \
    -d "{
          \"name\": \"Hoge\"
        }"

# findAll
curl -X GET --location "http://localhost:3000/cats" \
    -H "Accept: application/json"

# findOne
curl -X GET --location "http://localhost:3000/cats/1" \
    -H "Accept: application/json"


# update
curl -X PATCH --location "http://localhost:3000/cats/1" \
    -H "Content-Type: application/json" \
    -d "{
          \"name\": \"Hogehoge\"
        }"

# delete
curl -X DELETE --location "http://localhost:3000/cats/1" \
    -H "Content-Type: application/json"
```

## E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™

> E2E(End to End)Testã¯ã€User Interface Testã¨ã‚‚å‘¼ã°ã‚Œã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’é€šã—ã¦ãƒ†ã‚¹ãƒˆã‚’ãŠã“ãªã„ã¾ã™ã€‚
Webã‚µãƒ¼ãƒ“ã‚¹ã®å ´åˆã¯ã€ãƒ¦ãƒ¼ã‚¶ã¨åŒã˜ã‚ˆã†ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’æ“ä½œã—ã€æŒ™å‹•ãŒæœŸå¾…é€šã‚Šã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚

https://qiita.com/mt0m/items/7e18d8802843d9f60d28#E2E%E3%83%86%E3%82%B9%E3%83%88%E3%81%A8%E3%81%AF

## ãƒ†ã‚¹ãƒˆã§åˆ©ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

- `typeorm-seeding` ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å†…ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§åˆ©ç”¨ã—ã¾ã™
- `randomstring`:ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã—ã¾ã™

https://docs.nestjs.com/fundamentals/testing

https://www.npmjs.com/package/typeorm-seeding

```bash
npm i --save-dev @nestjs/testing randomstring typeorm-seeding
```

## ãƒ†ã‚¹ãƒˆã®è¨­å®šã‚’è¡Œã„ã¾ã™

```ts:test/cats.e2e-spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { tearDownDatabase, useRefreshDatabase } from 'typeorm-seeding';
import { CatsModule } from '../src/cats/cats.module';
import { TypeOrmModule } from '@nestjs/typeorm';
import { Cat } from '../src/cats/entities/cat.entity';
import { AppModule } from '../src/app.module';
import { CatsController } from '../src/cats/cats.controller';

describe('CatsController (e2e)', () => {
  let app: INestApplication;

  // æ¯å›å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†
  beforeEach(async () => {
    // DBã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
    await useRefreshDatabase();
  });

  // ãƒ†ã‚¹ãƒˆå‰ã«1å›ã ã‘å®Ÿè¡Œã™ã‚‹å‡¦ç†
  beforeAll(async () => {
    // ãƒ†ã‚¹ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å¿…è¦ãªå¯¾è±¡ã‚’DIã™ã‚‹
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [TypeOrmModule.forFeature([Cat]), CatsModule, AppModule],
      controllers: [CatsController],
    }).compile();

    app = moduleFixture.createNestApplication();

    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹
    app.useGlobalPipes(new ValidationPipe());
    await app.init();

    // ãƒ†ã‚¹ãƒˆå¾Œã«1å›ã ã‘å®Ÿè¡Œã™ã‚‹
    afterAll(async () => {
      // ãƒ†ã‚¹ãƒˆçµ‚äº†
      await app.close();

      // DBæ¥ç¶šçµ‚äº†
      await tearDownDatabase();
    });
  });

  it('/ (GET)', () => {
    return request(app.getHttpServer())
      .get('/')
      .expect(200)
      .expect('Hello World!');
  });
});
```

## ãƒ†ã‚¹ãƒˆã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™

```ts:test/cats.e2e-spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { tearDownDatabase, useRefreshDatabase } from 'typeorm-seeding';
import { TypeOrmModule } from '@nestjs/typeorm';
import { Cat } from '../src/cats/entities/cat.entity';
import { AppModule } from '../src/app.module';
import { CatsController } from '../src/cats/cats.controller';
import { CreateCatDto } from '../src/cats/dto/create-cat.dto';
import { CatsService } from '../src/cats/cats.service';
import * as randomstring from 'randomstring';

describe('CatsController (e2e)', () => {
  let app: INestApplication;

  // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«æ¯å›å®Ÿè¡Œã—ã¾ã™
  beforeEach(async () => {
    // DBã«æ¥ç¶šï¼†å†…éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
    await useRefreshDatabase();
  });

  // ãƒ†ã‚¹ãƒˆå‰ã«1å›ã ã‘å®Ÿè¡Œã—ã¾ã™
  beforeAll(async () => {
    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§DIã—ã¦ã„ã‚‹å¯¾è±¡ã‚’å®šç¾©ã—ã¾ã™
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [TypeOrmModule.forFeature([Cat]), AppModule],
      controllers: [CatsController],
      providers: [CatsService],
    }).compile();

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™
    app = moduleFixture.createNestApplication();

    // Auto-validation
    app.useGlobalPipes(new ValidationPipe());

    // ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åˆæœŸåŒ–
    await app.init();
  });

  // ãƒ†ã‚¹ãƒˆå¾Œã«1å›ã ã‘å®Ÿè¡Œã—ã¾ã™
  afterAll(async () => {
    // ãƒ†ã‚¹ãƒˆçµ‚äº†
    await app.close();

    // DBã¨ã®æ¥ç¶šã‚’çµ‚äº†ã™ã‚‹
    await tearDownDatabase();
  });

  async function saveCat(body: CreateCatDto): Promise<request.Response> {
    return request(app.getHttpServer())
      .post('/cats')
      .set('Accept', 'application/json')
      .send(body);
  }

  async function getById(id: number): Promise<request.Response> {
    return request(app.getHttpServer()).get(`/cats/${id}`);
  }

  it('/ create(OK)(POST)', async () => {
    const dto: CreateCatDto = { name: 'ãƒ†ã‚¹ãƒˆ' };
    const res = await saveCat(dto);
    expect(res.body.name).toEqual(dto.name);
    expect(res.status).toEqual(201);
  });

  it('/ create(NG)-åå‰æœªå…¥åŠ›(POST)', async () => {
    const dto: CreateCatDto = { name: null };
    const res = await saveCat(dto);
    expect(res.status).toEqual(400);
    expect(res.body.message).toEqual([
      'åå‰ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„',
      'åå‰ã¯å¿…é ˆé …ç›®ã§ã™',
    ]);
  });

  it('/ create(NG)-åå‰255æ–‡å­—ä»¥ä¸Š(POST)', async () => {
    const dto: CreateCatDto = { name: randomstring.generate({ length: 256 }) };
    const res = await saveCat(dto);
    expect(res.status).toEqual(400);
    expect(res.body.message).toEqual(['åå‰ã¯255æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„']);
  });

  it('/ findAll(OK)(GET)', async () => {
    const dto: CreateCatDto = { name: randomstring.generate({ length: 10 }) };
    await saveCat(dto);
    const res = await request(app.getHttpServer()).get('/cats');
    expect(res.status).toEqual(200);
    const { name } = res.body[0];
    expect(name).toEqual(dto.name);
  });

  it('/ findOne(OK)(GET)', async () => {
    const dto: CreateCatDto = { name: randomstring.generate({ length: 10 }) };
    const cat = await saveCat(dto);
    const res = await getById(cat.body.id);
    expect(res.status).toEqual(200);
    expect(res.body.name).toEqual(dto.name);
  });

  it('/ findOne(NG)-IDè©²å½“ãªã—(GET)', async () => {
    const res = await getById(9999);
    expect(res.status).toEqual(404);
  });

  it('/ update(OK)(PATCH)', async () => {
    const body: CreateCatDto = {
      name: randomstring.generate({ length: 10 }),
    };

    const cat = await request(app.getHttpServer())
      .post('/cats')
      .set('Accept', 'application/json')
      .send(body);

    await request(app.getHttpServer())
      .patch(`/cats/${cat.body.id}`)
      .set('Accept', 'application/json')
      .send({ name: 'æ›´æ–°' });

    const data = await request(app.getHttpServer()).get(`/cats/${cat.body.id}`);
    expect(data.status).toEqual(200);
    expect(data.body.name).toEqual('æ›´æ–°');
  });

  it('/ remove(OK)(DELETE)', async () => {
    const body: CreateCatDto = {
      name: randomstring.generate({ length: 10 }),
    };

    const cat = await request(app.getHttpServer())
      .post('/cats')
      .set('Accept', 'application/json')
      .send(body);

    const res = await request(app.getHttpServer()).delete(
      `/cats/${cat.body.id}`,
    );

    expect(res.status).toEqual(200);
    const data = await getById(cat.body.id);
    expect(data.status).toEqual(404);
  });
});

```

## ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™

ãƒ†ã‚¹ãƒˆãŒå…¨ã¦é€šã‚Œã°OKã§ã™

```bash
PASS  test/cats.e2e-spec.ts (11.379 s)
PASS  test/app.e2e-spec.ts

Test Suites: 2 passed, 2 total
Tests:       9 passed, 9 total
Snapshots:   0 total
Time:        12.42 s
```



## ãƒ†ã‚¹ãƒˆç”¨DBã‚³ãƒ³ãƒ†ãƒŠã‚’æ§‹ç¯‰ã—ã¾ã™

ã“ã“ã¾ã§ã§ãƒ†ã‚¹ãƒˆã®è‡ªå‹•åŒ–ã¯å®Œäº†ã—ã¾ã—ãŸãŒã€æ¯å›æ‰‹å‹•ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã®ã¯å¾®å¦™ãªã®ã§`GitHubActions`ã§è‡ªå‹•çš„ã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã¾ã™
ãã®ãŸã‚ã€GitHubActionsçµŒç”±ã§è¡Œã†CIç”¨ã®DBã‚³ãƒ³ãƒ†ãƒŠã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™

```Dockerfile:DockerfileTest
FROM node:14.16.1-alpine as build-test-db

# workãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ãƒã‚¦ãƒ³ãƒˆã—ã¾ã™
WORKDIR /work

COPY . /work/

RUN npm install

CMD ["npm","run","test:e2e"]
```

```yaml:e2e-test.yml
# docker-composeã§ä½¿ç”¨ã™ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³
version: '3'

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ã‹ã™ãŸã‚ã®å„è¦ç´ 
services:
  # ã‚³ãƒ³ãƒ†ãƒŠå
  app:
    # ComposeFileã‚’å®Ÿè¡Œã—ã€ãƒ“ãƒ«ãƒ‰ã•ã‚Œã‚‹ã¨ãã®path
    build:
      # docker buildã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸå ´æ‰€
      context: "."
      # Dockerfileã®ã‚ã‚‹å ´æ‰€
      dockerfile: "DockerfileTest"
    # ã‚³ãƒ³ãƒ†ãƒŠå
    container_name: github-actions-api-test
    # ãƒãƒ¼ãƒˆç•ªå·
    ports:
      - '3000:3000'
      # ç’°å¢ƒå¤‰æ•°
    environment:
      PORT: 3000
      TZ: 'Asia/Tokyo'
      DB_HOST: 'testDb'
      DB_PORT: '3306'
      DB_USERNAME: 'root'
      DB_PASSWORD: 'password'
      DB_NAME: 'meetup'
      # ã‚µãƒ¼ãƒ“ã‚¹é–“ã®ä¾å­˜é–¢ä¿‚
    depends_on:
      - testDb

  testDb:
    image: mysql:8.0
    command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    container_name: db_container_e2e_test
    ports:
      - "3306:3306"
    environment:
      TZ: 'Asia/Tokyo'
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: meetup
      MYSQL_USER: app
      MYSQL_PASSWORD: secret
```

## ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç·¨é›†ã—ã¾ã™

ä¸¦åˆ—ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã§ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥å‡¦ç†ã¨ãƒ†ã‚¹ãƒˆã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã—ã¾ã„ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦ãŠãã¾ã™

- `--runInBand`:ç¾åœ¨ã®ãƒ—ãƒ­ã‚»ã‚¹ã§å…¨ã¦ã®ãƒ†ã‚¹ãƒˆã‚’1ã¤ãšã¤å®Ÿè¡Œ
- `--forceExit `:å…¨ãƒ†ã‚¹ãƒˆãŒçµ‚äº†ã—ãŸå¾Œã«Jestã‚’å¼·åˆ¶çš„ã«çµ‚äº†

https://github.com/visionmedia/supertest/issues/520


https://qiita.com/naoki-haba/items/4c47c1972fa2bc988182

```json:package.json
"test:e2e": "jest --runInBand --forceExit --config ./test/jest-e2e.json"
```

## GitHubã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©ã—ã¾ã™

```yaml:.github/workflows/run_test.yml
# ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹GitHubã‚¤ãƒ™ãƒ³ãƒˆã®åå‰
on:
  # mainãƒ–ãƒ©ãƒ³ãƒã«PRã™ã‚‹ã¨å®Ÿè¡Œã™ã‚‹
  pull_request:
    branches:
      - main
# ã‚¸ãƒ§ãƒ–å®šç¾©
jobs:
  run-test:
    name: Run Test
    # ubuntuç’°å¢ƒã§å‹•ä½œ
    runs-on: ubuntu-latest
    # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®šç¾©
    steps:
      - name: checkout pushed commit
        # ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v2
        with:
          # PRã®HEADãƒ–ãƒ©ãƒ³ãƒã‚’ä½¿ã†
          ref: ${{ github.event.pull_request.head.sha }}
      # E2E ãƒ†ã‚¹ãƒˆã‚’ Docker Compose ã§å®Ÿè¡Œã™ã‚‹
      - name: run test on docker-compose
        run: |
          docker-compose -f ./e2e-test.yml build
          docker-compose -f ./e2e-test.yml up --abort-on-container-exit
        working-directory: ./
```

## mainãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ã¿ã¾ã—ã‚‡ã†

è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚Œã°æˆåŠŸã§ã™

![ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2022-05-02 3.57.39.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/555632/8a69ef15-b4df-e88c-0561-a8a1b1d2ed27.png)

# ã¾ã¨ã‚

ã“ã“ã¾ã§ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ã„ã¦GitHubActionsã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹CIç’°å¢ƒã‚’æ§‹ç¯‰ã§ãã¾ã—ãŸ

ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿã€€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã§è‡ªèº«ã®ã‚³ãƒ¼ãƒ‰ãŒæœ€ä½é™å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’æ‹…ä¿ã§ãã¾ã™ã€‚
ã¾ãŸãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ãƒãƒ¼ãƒ‰ãƒ«ã‚‚ä¸‹ã’ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§æ˜¯éå°å…¥ã—ã¦ã¿ã¦ã¯ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ï¼Ÿï¼Ÿ
